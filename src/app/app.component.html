<ng-container *ngIf="summary$ |async as summary; else loading">
    <div>
        <div class="main-container">
            <h1 >New Confirmed:{{summary.Global.NewConfirmed}}</h1>
            <h1 >Total Confirmed:{{summary.Global.TotalConfirmed}}</h1>
        </div>
        <div class="main-container">
            <h1 >New Deaths:{{summary.Global.NewDeaths}}</h1>
            <h1 >Total Deaths:{{summary.Global.TotalDeaths}}</h1>
        </div>
        <div class="main-container">
            <h1 >New Recovered:{{summary.Global.NewRecovered}}</h1>
            <h1 >Total Recovered:{{summary.Global.TotalRecovered}}</h1>
        </div>
    </div>
</ng-container>
<form [formGroup]="form" class="container">
    <div class="d-flex gap-4 align-items-center">
        <ng-container *ngIf="countries$ |async as countires; else loading">
            <select class="form-select" id="countries" formControlName="country">
                <option *ngFor="let contry of countires" [ngValue]="contry.Slug"> {{contry.Country}}</option>
            </select>
        </ng-container>
        <select class="form-select" formControlName="status" >
            <option *ngFor="let status of statusArray" value={{status}}>{{status}}</option>
        </select>
        <ng-container *ngIf="!form.get('total')?.value">
            <div class="form-check">
                <label class="form-check-label" for="live">Live</label>
                <input class="form-check-input" type="checkbox" name="" id="live" formControlName="live" >
            </div>
            
        </ng-container>
        <ng-container *ngIf="!form.get('live')?.value">
            <div class="form-check">
                <label class="form-check-label" for="total">Total</label>
                <input class="form-check-input" type="checkbox" name="" id="total" formControlName="total">
            </div>
        </ng-container>
        <div class="form-group">
            <!-- <label class="form-label" for="from">From</label> -->
            <input class="form-control"  type="date"  id="from" formControlName="from" max="{{date}}">
        </div>
        <ng-container *ngIf="form.get('from')?.value">
            <div class="form-group">
                <!-- <label class="form-label" for="to">To</label> -->
                <input class="form-control" type="date" name="" id="to" formControlName="to" value="{{form.get('from')?.value}}" min="{{form.get('from')?.value}}" max="{{date}}">
            </div>
        </ng-container>
    </div>
    <button class="btn btn-primary w-100 mt-2" [disabled]="form.get('country')?.errors" (click)="Search()">Search</button>
</form>
<ng-container *ngIf="data$ |async as data; else loading">
    <table class="table table-striped table-bordered table-hover text-center mt-2">
        <thead>
            <tr>
                <th>Country</th>
                <th>Country Code</th>
                <th>Lat</th>
                <th>Lon</th>
                <th>Cases</th>
                <th>Status</th>
                <th>Date</th>
            </tr>    
        </thead>
        <tbody>
            <tr *ngFor="let object of data">
                <td >{{object.Country}}</td>
                <td >{{object.CountryCode}}</td>
                <td >{{object.Lat}}</td>
                <td >{{object.Lon}}</td>
                <td >{{object.Cases}}</td>
                <td >{{object.Status}}</td>
                <td >{{object.Date }}</td>
            </tr>
        </tbody>
    </table>
</ng-container>
<ng-template #loading>
    <app-loading-notifier class="center-loading"></app-loading-notifier>
</ng-template>